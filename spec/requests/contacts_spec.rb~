require 'rails_helper' 
# spec/requests/feedback_spec.rb
describe "Contacts" do 
	describe "Manage Feedback Listing" do 
		it "Adds a new Feedback and displays the results" do 
			visit contacts_url 
				expect{ 
					click_link 'New Feedback' 
					fill_in 'feedback_text', with: "Final Job" 
					click_button "Create Feedack" 
			}.to change(Contact,:count).by(1) 
			page.should have_content "Feedback was successfully created."
					within 'h1' do 
					page.should have_content "Final Job" 
				end 
			end 

		it "Deletes a feedback" do 
			feedback = create(:feedback, text: "Final Job")
			visit contacts_path 
				expect{ 
					within "#contact_#{contact.id}" do 
					click_link 'Destroy' 
				end 
		}.to change(Contact,:count).by(-1) 
		page.should have_content "Listing contacts" 	
		page.should_not have_content "Aaron Sumner" 
	end
     end 
end
